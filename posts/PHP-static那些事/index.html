<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>PHP - static那些事 - 程式狂想筆記 - 記錄著我接觸程式藝文</title><meta name=Description content="記錄著我接觸程式藝文"><meta property="og:title" content="PHP - static那些事"><meta property="og:description" content="本篇有毒，請小心服用
本篇有毒，請小心服用
本篇有毒，請小心服用
推薦看這篇Self, this, static 在 PHP 中的差異 - Learn or Die、Ray Lee | 李宗叡 – Medium內容，大神整理的文章就是不一樣，當出只是想了解 static ，結果查到相關東西有點多，就動手實作就順便記錄，因為我程式能力也不是特別強，英文也不是特別好，所以這篇文章都是測試看結果推測結論，這可能不是最正確的方法，所以不推薦路過的人看這篇。
當出只是想留給自己當記錄用，就想應該沒有人會看到這篇，前陣子看到FB大神貼的文章，想說之前有寫過，看到下面有引用我的文章，嚇死哥了！！丟臉死啦
本篇應該不會再修正，因為我最近工作是使用 Java，所以不會再跳回已前的坑。其實我還是沒有把握寫好這篇!!XD我原本想寫 Blog 是當做自己筆記，想說常常也從別的 Blog 學到一些東西，也當然想分享到網路上，希望路過的人能看到我的文章解決問題我也會滿高興的。
網路很容易分享資訊，但分享出去資訊是不是正確也要自己驗證，有錯誤也歡迎指教，也可以跟我說哪裡有錯。
===========
最近使用在看static部份
平常很少用，過很久可能就會忘了這是什麼東西
但 global 部份應該不再記錄
PHP 有關參照(Reference)的那些事 | 程式狂想筆記
這裡面有簡單提到"><meta property="og:type" content="article"><meta property="og:url" content="https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-02-20T22:17:56+00:00"><meta property="article:modified_time" content="2019-02-20T22:17:56+00:00"><meta property="og:site_name" content="程式狂想筆記"><meta name=twitter:card content="summary"><meta name=twitter:title content="PHP - static那些事"><meta name=twitter:description content="本篇有毒，請小心服用
本篇有毒，請小心服用
本篇有毒，請小心服用
推薦看這篇Self, this, static 在 PHP 中的差異 - Learn or Die、Ray Lee | 李宗叡 – Medium內容，大神整理的文章就是不一樣，當出只是想了解 static ，結果查到相關東西有點多，就動手實作就順便記錄，因為我程式能力也不是特別強，英文也不是特別好，所以這篇文章都是測試看結果推測結論，這可能不是最正確的方法，所以不推薦路過的人看這篇。
當出只是想留給自己當記錄用，就想應該沒有人會看到這篇，前陣子看到FB大神貼的文章，想說之前有寫過，看到下面有引用我的文章，嚇死哥了！！丟臉死啦
本篇應該不會再修正，因為我最近工作是使用 Java，所以不會再跳回已前的坑。其實我還是沒有把握寫好這篇!!XD我原本想寫 Blog 是當做自己筆記，想說常常也從別的 Blog 學到一些東西，也當然想分享到網路上，希望路過的人能看到我的文章解決問題我也會滿高興的。
網路很容易分享資訊，但分享出去資訊是不是正確也要自己驗證，有錯誤也歡迎指教，也可以跟我說哪裡有錯。
===========
最近使用在看static部份
平常很少用，過很久可能就會忘了這是什麼東西
但 global 部份應該不再記錄
PHP 有關參照(Reference)的那些事 | 程式狂想筆記
這裡面有簡單提到"><meta name=application-name content="程式狂想筆記"><meta name=apple-mobile-web-app-title content="程式狂想筆記"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/><link rel=prev href=https://malagege.github.io/blog/posts/Bootstrap-%E4%B8%8D%E7%9F%A5%E9%81%93Modal%E4%B8%80%E4%BA%9B%E4%BA%8B%E7%AD%86%E8%A8%98/><link rel=next href=https://malagege.github.io/blog/posts/PHP-intval%E8%B7%9F-int-%E5%BC%B7%E5%88%B6%E8%BD%89%E5%9E%8B%E5%B7%AE%E5%88%A5/><link rel=stylesheet href=/blog/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"PHP - static那些事","inLanguage":"zh-tw","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/malagege.github.io\/blog\/posts\/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B\/"},"genre":"posts","keywords":"php, static","wordcount":1328,"url":"https:\/\/malagege.github.io\/blog\/posts\/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B\/","datePublished":"2019-02-20T22:17:56+00:00","dateModified":"2019-02-20T22:17:56+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"malagege"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/blog/ title="程式狂想筆記 - 記錄著我接觸程式藝文">程式狂想筆記</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/blog/>首頁 </a><a class=menu-item href=/blog/posts/>文章 </a><a class=menu-item href=/blog/tags/>標籤 </a><a class=menu-item href=/blog/categories/>分類 </a><a class=menu-item href=/blog/links/ title=覺得不錯好站都會放在這邊>好站連結 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/blog/ title="程式狂想筆記 - 記錄著我接觸程式藝文">程式狂想筆記</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/blog/ title>首頁</a><a class=menu-item href=/blog/posts/ title>文章</a><a class=menu-item href=/blog/tags/ title>標籤</a><a class=menu-item href=/blog/categories/ title>分類</a><a class=menu-item href=/blog/links/ title=覺得不錯好站都會放在這邊>好站連結</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div><div align=center><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1439458814178865" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1439458814178865 data-ad-slot=2236653478></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">PHP - static那些事</h1><div align=center><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1439458814178865" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1439458814178865 data-ad-slot=2236653478></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/blog/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>malagege</a></span>&nbsp;<span class=post-category>included in <a href=/blog/categories/PHP/><i class="far fa-folder fa-fw" aria-hidden=true></i>PHP</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2019-02-20>2019-02-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1328 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;7 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#static-用在變數>static 用在變數</a><ul><li><a href=#遞迴-function-static-變數>遞迴 function static 變數</a></li><li><a href=#定義-static-變數限制>定義 static 變數限制</a></li></ul></li><li><a href=#static-用在-object-function>static 用在 Object Function</a><ul><li><a href=#self>self</a></li><li><a href=#static>static</a></li></ul></li><li><a href=#late-static-bindings后期静态绑定>Late Static Bindings(后期静态绑定)</a><ul><li><a href=#在非靜態環境下使用-static>在非靜態環境下使用 static::</a></li></ul></li><li><a href=#forward_static_call-和-call_user_func>forward_static_call 和 call_user_func</a></li><li><a href=#參考來源>參考來源</a></li></ul></nav></div></div><div class=content id=content><p><strong>本篇有毒，請小心服用</strong><br><strong>本篇有毒，請小心服用</strong><br><strong>本篇有毒，請小心服用</strong></p><p>推薦看這篇<a href=https://tn710617.github.io/zh-tw/difference-between-self-this-static-in-php/index.html target=_blank rel="noopener noreffer">Self, this, static 在 PHP 中的差異 - Learn or Die</a>、<a href=https://raycodingjourney.medium.com/ target=_blank rel="noopener noreffer">Ray Lee | 李宗叡 – Medium</a>內容，大神整理的文章就是不一樣，當出只是想了解 static ，結果查到相關東西有點多，就動手實作就順便記錄，因為我程式能力也不是特別強，英文也不是特別好，所以這篇文章都是測試看結果推測結論，這可能不是最正確的方法，所以不推薦路過的人看這篇。</p><p>當出只是想留給自己當記錄用，就想應該沒有人會看到這篇，前陣子看到FB大神貼的文章，想說之前有寫過，看到下面有引用我的文章，嚇死哥了！！<del>丟臉死啦</del></p><p>本篇應該不會再修正，因為我最近工作是使用 Java，所以不會再跳回已前的坑。<del>其實我還是沒有把握寫好這篇!!XD</del>我原本想寫 Blog 是當做自己筆記，想說常常也從別的 Blog 學到一些東西，也當然想分享到網路上，希望路過的人能看到我的文章解決問題我也會滿高興的。</p><p>網路很容易分享資訊，但分享出去資訊是不是正確也要自己驗證，有錯誤也歡迎指教，也可以跟我說哪裡有錯。</p><p>===========</p><p>最近使用在看<code>static</code>部份<br>平常很少用，過很久可能就會忘了這是什麼東西<br>但 global 部份應該不再記錄<br><a href=https://malagege.github.io/blog/posts/PHP%E6%9C%89%E9%97%9C%E5%8F%83%E7%85%A7-Reference-%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/ target=_blank rel="noopener noreffer">PHP 有關參照(Reference)的那些事 | 程式狂想筆記</a><br>這裡面有簡單提到</p><h2 id=static-用在變數>static 用在變數</h2><p>static 通常是寫在 function 裡面<br>但寫在 function 外面也不會報錯</p><p>一般沒有 static</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>test</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=nv>$a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$a</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>test</span><span class=p>();</span> <span class=c1>//0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>test</span><span class=p>();</span> <span class=c1>//0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>test</span><span class=p>();</span> <span class=c1>//0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>static 後</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>test</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=nv>$a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=nv>$a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$a</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>test</span><span class=p>();</span> <span class=c1>//1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>test</span><span class=p>();</span> <span class=c1>//2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>test</span><span class=p>();</span> <span class=c1>//3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=遞迴-function-static-變數>遞迴 function static 變數</h3><p>先看官網範例，可以用在遞迴，但後面注意<code>$count--</code>的關係<br>所以跑完<code>$count</code>變數會歸 0<br>但是沒有寫<code>$count--</code>不會</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>test</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=nv>$count</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nv>$count</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=nv>$count</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$count</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>test</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nv>$count</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>test</span><span class=p>();</span> <span class=c1>// 12345678910
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>echo</span> <span class=nx>PHP_EOL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>test</span><span class=p>();</span> <span class=c1>// 12345678910
</span></span></span></code></pre></td></tr></table></div></div><h3 id=定義-static-變數限制>定義 static 變數限制</h3><p>簡單看官往範例，其實也滿好懂得<br>用運算式再次進入 function 怎麼知道初始值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>foo</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=nv>$int</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>          <span class=c1>// correct
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>static</span> <span class=nv>$int</span> <span class=o>=</span> <span class=mi>1</span><span class=o>+</span><span class=mi>2</span><span class=p>;</span>        <span class=c1>// correct (as of PHP 5.6)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>static</span> <span class=nv>$int</span> <span class=o>=</span> <span class=nx>sqrt</span><span class=p>(</span><span class=mi>121</span><span class=p>);</span>  <span class=c1>// wrong  (as it is a function)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nv>$int</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>echo</span> <span class=nv>$int</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>靜態聲明是在編譯時解析的。<br><a href=https://blog.csdn.net/risingsun001/article/details/22888861 target=_blank rel="noopener noreffer">深入理解 PHP 代码的执行的过程 - risingsun001 的专栏 - CSDN 博客</a><br>這一快我不是很了解</p><h2 id=static-用在-object-function>static 用在 Object Function</h2><h3 id=self>self</h3><p>這邊先介紹 Object 會用到的 self</p><p>self:: 或者 __CLASS__，也可以用 get_class()呼叫<br>簡單說明一下，這邊跟 Java 的 this 很像<br>當是參照當前放置的 class 位置<br>可以看一下<a href=https://malagege.github.io/blog/posts/java-method-%E9%A1%9E%E5%88%A5%E6%88%90%E5%93%A1-class-member-%E7%B9%BC%E6%89%BF%E8%B8%A9%E9%9B%B7/ target=_blank rel="noopener noreffer">java method 類別成員(class member) 繼承踩雷 | 程式狂想筆記</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>self</span><span class=o>::</span><span class=na>who</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span> <span class=k>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>B</span><span class=o>::</span><span class=na>test</span><span class=p>();</span>  <span class=c1>#A
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=static>static</h3><h2 id=late-static-bindings后期静态绑定>Late Static Bindings(后期静态绑定)</h2><p>static 跟 get_called_class()方法一樣，他是指實例後物件位置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span><span class=o>::</span><span class=na>who</span><span class=p>();</span> <span class=c1>// 后期静态绑定从这里开始
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span> <span class=k>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>B</span><span class=o>::</span><span class=na>test</span><span class=p>();</span> <span class=c1># B
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>在非靜態環境下，所調用的類即為該對象實例所屬的類。由於 $this-> 會在同一作用範圍內嘗試調用私有方法，而 static:: 則可能給出不同結果。另一個區別是 static:: 只能用於靜態屬性。</p></blockquote><h3 id=在非靜態環境下使用-static>在非靜態環境下使用 static::</h3><blockquote><p>Note:<br>在非靜態環境下，所調用的類即為該對象實例所屬的類。由於 $this-> 會在同一作用範圍內嘗試調用私有方法，而 static:: 則可能給出不同結果。另一個區別是 static:: 只能用於靜態屬性。</p></blockquote><p>事後我在網路上找到了，更詳細解說<br><a href=https://blog.csdn.net/lamp_yang_3533/article/details/79912453 target=_blank rel="noopener noreffer">PHP 中 self、static、$this 的区别 & 后期静态绑定详解 - 彳亍 - CSDN 博客</a><br><a href=1.png rel>備份圖</a><br>老實說這篇寫很亂了 orz</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>注意事项
</span></span><span class=line><span class=cl>非静态环境下的私有方法的查找顺序
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>在非静态环境下，在类的非静态方法中，使用 $this 和 static 调用类的私有方法时，执行方式有所不同。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    $this 会优先寻找所在定义范围（父类）中的私有方法，如果存在就调用。
</span></span><span class=line><span class=cl>    static 是先到它指向的类（子类）中寻找私有方法，如果找到了就会报错，因为私有方法只能在它所定义的类内部调用；如果没找到，再去所在定义范围（父类）中寻找该私有方法，如果存在就调用。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>具体来说，$this 会先到所在定义范围内寻找私有方法，再到它指向的对象所属的类中寻找私有方法，然后寻找公有方法，最后到所在定义范围内寻找公共方法。只要找到了匹配的方法，就调用，并停止查找。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>而 static 则是先到它指向的类中寻找私有方法，再寻找共有方法；然后到所在定义范围内寻找私有方法，再寻找共有方法。只要找到了匹配的方法，就调用，并停止查找。
</span></span><span class=line><span class=cl>---------------------
</span></span><span class=line><span class=cl>作者：lamp_yang_3533
</span></span><span class=line><span class=cl>来源：CSDN
</span></span><span class=line><span class=cl>原文：https://blog.csdn.net/lamp_yang_3533/article/details/79912453
</span></span><span class=line><span class=cl>版权声明：本文为博主原创文章，转载请附上博文链接！
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>function</span> <span class=nf>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=s2>&#34;success!</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>foo</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span><span class=o>::</span><span class=na>foo</span><span class=p>();</span> <span class=c1>//** C實例呼叫的時候會有問題
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span> <span class=k>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=cm>/* foo() will be copied to B, hence its scope will still be A and
</span></span></span><span class=line><span class=cl><span class=cm>    * the call be successful */</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>C</span> <span class=k>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>function</span> <span class=nf>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* original method is replaced; the scope of the new one is C */</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$b</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>B</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nv>$b</span><span class=o>-&gt;</span><span class=na>test</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>C</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span><span class=o>-&gt;</span><span class=na>test</span><span class=p>();</span>   <span class=c1>//fails
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// success!
</span></span></span><span class=line><span class=cl><span class=c1>// success!
</span></span></span><span class=line><span class=cl><span class=c1>// success!
</span></span></span><span class=line><span class=cl><span class=c1>// &lt;br /&gt;
</span></span></span><span class=line><span class=cl><span class=c1>// &lt;b&gt;Fatal error&lt;/b&gt;:  Uncaught Error: Call to private method C::foo() from context &#39;A&#39; in [...][...]:9
</span></span></span><span class=line><span class=cl><span class=c1>// Stack trace:
</span></span></span><span class=line><span class=cl><span class=c1>// #0 [...][...](27): A-&amp;gt;test()
</span></span></span><span class=line><span class=cl><span class=c1>// #1 {main}
</span></span></span><span class=line><span class=cl><span class=c1>//   thrown in &lt;b&gt;[...][...]&lt;/b&gt; on line &lt;b&gt;9&lt;/b&gt;&lt;br /&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// PHP 5
</span></span></span><span class=line><span class=cl><span class=c1>// Fatal error:  Call to private method C::foo() from context &#39;A&#39; in /tmp/test.php on line 9
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>Late static bindings&rsquo; resolution will stop at a fully resolved static call with no fallback. On the other hand, static calls using keywords like parent:: or self:: will forward the calling information.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span><span class=o>::</span><span class=na>who</span><span class=p>();</span><span class=c1>// (2) 遇到後期靜態綁定
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=o>.</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span> <span class=k>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>A</span><span class=o>::</span><span class=na>foo</span><span class=p>();</span><span class=c1>// 這不是轉發 (1)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>parent</span><span class=o>::</span><span class=na>foo</span><span class=p>();</span><span class=c1>// 這是轉發 (1)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>self</span><span class=o>::</span><span class=na>foo</span><span class=p>();</span><span class=c1>//   這是轉發 (1)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>static</span><span class=o>::</span><span class=na>foo</span><span class=p>();</span><span class=c1>// 這是轉發 (1)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=o>.</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>C</span> <span class=k>extends</span> <span class=nx>B</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=o>.</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>C</span><span class=o>::</span><span class=na>test</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>foo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>static</span><span class=o>::</span><span class=na>who</span><span class=p>();</span><span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=o>.</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>  <span class=c1>//這個不是後期靜態綁定
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span> <span class=k>extends</span> <span class=nx>A</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>A</span><span class=o>::</span><span class=na>who</span><span class=p>();</span><span class=c1>// 這不是轉發
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>parent</span><span class=o>::</span><span class=na>who</span><span class=p>();</span><span class=c1>// 這是轉發
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>self</span><span class=o>::</span><span class=na>who</span><span class=p>();</span><span class=c1>// 這是轉發
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>static</span><span class=o>::</span><span class=na>who</span><span class=p>();</span><span class=c1>// 這是轉發
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=o>.</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>C</span> <span class=k>extends</span> <span class=nx>B</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>who</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>echo</span> <span class=no>__CLASS__</span><span class=o>.</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>C</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span><span class=o>-&gt;</span><span class=na>test</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>C</span><span class=o>::</span><span class=na>test</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1>// B
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1>// A
</span></span></span><span class=line><span class=cl><span class=c1>// B
</span></span></span><span class=line><span class=cl><span class=c1>// C
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>老實說上面例子花我很多時間想的，重寫兩次文章(因為一直發現理解錯誤)<br>只要進入 B 的 parent,static,self 再跳到 A 的 test function 裡面的<code>static::who();</code>(後期靜態綁定)<br>就會抓當下 class<br>不管是<code>實例</code>或者 <code>static</code><br>都會印出 C</p><hr><p>下面是直接在 B 的 test()做，第一次的時候做轉發，跳到下一個 function *<em>沒有</em><code>用後期靜態綁定</code><br>而且__CLASS__(self)，只會抓到原本的類別(非實例出來的類別)</p><p>這邊的 static 轉發(forward)同等於<code>forward_static_call()</code><br>所以下面這個範例，__CLASS__改成<code>get_called_class()</code>一樣會變成上面結果一致</p><ul><li><a href=http://php.net/manual/zh/function.forward-static-call.php target=_blank rel="noopener noreffer">PHP: forward_static_call - Manual</a></li></ul><h2 id=forward_static_call-和-call_user_func>forward_static_call 和 call_user_func</h2><p>這兩個 function 功能很像，但差在用在 static 地方。<br>重點是下面這兩個<code>call_user_func('A::bar'); //non-forwarding, 'A'</code>和<code>forward_static_call('A::bar'); //forwarding, 'B'</code><br>這兩個讓我想到 JavaScript 閉包用到(this)這個東西，但 js 解決方法是用<code>箭頭函式</code>和<code>var that = this</code>解決(題外話，請忽略這段)</p><p>但 forward_static_call 有一個例外，當父類別到子類別的話，不做轉發動做，看下面範例</p><p><a href=https://stackoverflow.com/questions/5061476/php-forward-static-call-vs-call-user-func target=_blank rel="noopener noreffer">php 5.3 - PHP forward_static_call vs call_user_func - Stack Overflow</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>The difference is just that forward_static_call does not reset the &#34;called class&#34; information if going up the class hierarchy and explicitly naming a class, whereas call_user_func resets the information in those circumstances (but still does not reset it if using parent, static or self).
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Example:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;?php
</span></span><span class=line><span class=cl>class A {
</span></span><span class=line><span class=cl>    static function bar() { echo get_called_class(), &#34;\n&#34;; }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>class B extends A {
</span></span><span class=line><span class=cl>    static function foo() {
</span></span><span class=line><span class=cl>        parent::bar(); //forwards static info, &#39;B&#39;
</span></span><span class=line><span class=cl>        call_user_func(&#39;parent::bar&#39;); //forwarding, &#39;B&#39;
</span></span><span class=line><span class=cl>        call_user_func(&#39;static::bar&#39;); //forwarding, &#39;B&#39;
</span></span><span class=line><span class=cl>        call_user_func(&#39;A::bar&#39;); //non-forwarding, &#39;A&#39;
</span></span><span class=line><span class=cl>        forward_static_call(&#39;parent::bar&#39;); //forwarding, &#39;B&#39;
</span></span><span class=line><span class=cl>        forward_static_call(&#39;A::bar&#39;); //forwarding, &#39;B&#39;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>B::foo();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Note that forward_static_call refuses to forward if going down the class hierarchy:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;?php
</span></span><span class=line><span class=cl>class A {
</span></span><span class=line><span class=cl>    static function foo() {
</span></span><span class=line><span class=cl>        forward_static_call(&#39;B::bar&#39;); //non-forwarding, &#39;B&#39;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>class B extends A {
</span></span><span class=line><span class=cl>    static function bar() { echo get_called_class(), &#34;\n&#34;; }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>A::foo();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Finally, note that forward_static_call can only be called from within a class method.
</span></span></code></pre></td></tr></table></div></div><p>The difference is just that forward_static_call does not reset the &ldquo;called class&rdquo; information if going up the class hierarchy and explicitly naming a class, whereas call_user_func resets the information in those circumstances (but still does not reset it if using parent, static or self).</p><p>最後我覺得 static 和$this 很相似<br>但看到這篇裡面有寫差異<br>雖然我有一點 Java 物件導向觀念，但是 PHP 物件導向還滿難理解</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>static 和 $this 有点类似，但又有区别：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    $this 指向的对象所属的类和 static 指向的类相同。
</span></span><span class=line><span class=cl>    $this 不能用于静态方法中，也不能访问类的静态属性和常量。
</span></span><span class=line><span class=cl>    $this 指向的是实际调用的对象。
</span></span><span class=line><span class=cl>    static 可以用于静态或非静态方法中，也可以访问类的静态属性、静态方法、常量和非静态方法，但不能访问非静态属性。
</span></span><span class=line><span class=cl>    static 指向的是实际调用时的对象所属的类。
</span></span><span class=line><span class=cl>---------------------
</span></span><span class=line><span class=cl>作者：lamp_yang_3533
</span></span><span class=line><span class=cl>来源：CSDN
</span></span><span class=line><span class=cl>原文：https://blog.csdn.net/lamp_yang_3533/article/details/79912453
</span></span><span class=line><span class=cl>版权声明：本文为博主原创文章，转载请附上博文链接！
</span></span></code></pre></td></tr></table></div></div><h2 id=參考來源>參考來源</h2><ul><li><a href=http://asika.windspeaker.co/post/3483-php-static-self target=_blank rel="noopener noreffer">PHP 的 static 與 self 兩個關鍵字的差異 | Asika Lab 飛鳥實驗室</a></li><li><a href=http://php.net/manual/en/language.oop5.late-static-bindings.php target=_blank rel="noopener noreffer">PHP: Late Static Bindings - Manual</a></li><li><a href=http://php.net/manual/zh/function.forward-static-call.php target=_blank rel="noopener noreffer">PHP: forward_static_call - Manual</a></li><li><a href=http://landcareweb.com/questions/30864/php-forward-static-call-vs-call-user-func target=_blank rel="noopener noreffer">PHP forward_static_call vs call_user_func | landcareweb.com</a></li><li><a href=http://rocksaying.tw/archives/10796755.html target=_blank rel="noopener noreffer">PHP 5.3/6 新增功能 - Late Static Bindings - 石頭閒語</a></li><li><a href=https://stackoverflow.com/questions/5061476/php-forward-static-call-vs-call-user-func target=_blank rel="noopener noreffer">php 5.3 - PHP forward_static_call vs call_user_func - Stack Overflow</a></li><li><a href=https://codeday.me/bug/20181023/313202.html target=_blank rel="noopener noreffer">PHP forward_static_call 和 call_user_func - 代码日志</a></li><li><a href=http://php.net/manual/zh/function.forward-static-call.php target=_blank rel="noopener noreffer">PHP: forward_static_call - Manual</a></li><li><a href=http://www.cleey.com/blog/single/id/854.html target=_blank rel="noopener noreffer">PHP 关于 self:: 和 static:: | 随意博客</a></li><li><a href=http://www.pilishen.com/posts/php-late-static-bindings-in-laravel target=_blank rel="noopener noreffer">通过 static 关键词来实现 late static binding（静态调用绑定）-pilishen.com,做全球最好的实战教程</a></li><li><a href=http://miggo.pixnet.net/blog/post/30799978-%5Bphp%E8%A7%80%E5%BF%B5%5Dself%E5%92%8C%24this%E7%9A%84%E5%B7%AE%E7%95%B0 target=_blank rel="noopener noreffer">[PHP 觀念]self 和$this 的差異 @ 麥克的學習紀錄 :: 痞客邦 ::</a></li></ul><div align=center><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1439458814178865" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1439458814178865 data-ad-slot=2236653478></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2019-02-20</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/ data-title="PHP - static那些事" data-hashtags=php,static><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/ data-hashtag=php><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/ data-title="PHP - static那些事"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/ data-title="PHP - static那些事"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://malagege.github.io/blog/posts/PHP-static%E9%82%A3%E4%BA%9B%E4%BA%8B/ data-title="PHP - static那些事"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/blog/tags/php/>php</a>,&nbsp;<a href=/blog/tags/static/>static</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/blog/>Home</a></span></section></div><div class=post-nav><a href=/blog/posts/Bootstrap-%E4%B8%8D%E7%9F%A5%E9%81%93Modal%E4%B8%80%E4%BA%9B%E4%BA%8B%E7%AD%86%E8%A8%98/ class=prev rel=prev title="Bootstrap 不知道Modal一些事筆記"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Bootstrap 不知道Modal一些事筆記</a>
<a href=/blog/posts/PHP-intval%E8%B7%9F-int-%E5%BC%B7%E5%88%B6%E8%BD%89%E5%9E%8B%E5%B7%AE%E5%88%A5/ class=next rel=next title="PHP intval跟(int)強制轉型差別">PHP intval跟(int)強制轉型差別<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.109.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/blog/ target=_blank>malagege</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://malagege-blog.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightgallery:!0,search:{algoliaAppID:"4LYONZIY18",algoliaIndex:"malagege_blog",algoliaSearchKey:"30dc05f673e702e0701b9b40cfa44eac",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/blog/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-105195903-2",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-105195903-2" async></script></body></html>