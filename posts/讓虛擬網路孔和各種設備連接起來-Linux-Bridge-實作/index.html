<!DOCTYPE html>
<html lang="zh-tw">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ - ç¨‹å¼ç‹‚æƒ³ç­†è¨˜</title><meta name="Description" content="è¨˜éŒ„è‘—æˆ‘æ¥è§¸ç¨‹å¼è—æ–‡"><meta property="og:title" content="è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ" />
<meta property="og:description" content="æœ€è¿‘è¦è®“ KVM ä¸é€éè¨­å®šè·¯ç”±ï¼Œæƒ³ç›´æ¥é€£æ¥åˆ°ç¾æœ‰ç¶²æ®µï¼Œé€™é‚Šç¹¼ç¶²è·¯æ–°æ‰‹è™›æ“¬ç¶²è·¯è¨­å‚™ veth pair å¯¦ä½œç­†è¨˜ - ç¨‹å¼ç‹‚æƒ³ç­†è¨˜é€™ç¯‡ç ”ç©¶ï¼Œæˆ‘å€‘é€™é‚Šç°¡å–®æ“ä½œ Linux Bridge è®“å¤šç¨®å­”å¯ä»¥äº’ç›¸é€£ç·šã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-17T22:28:34+08:00" />
<meta property="article:modified_time" content="2023-09-17T22:28:34+08:00" /><meta property="og:site_name" content="ç¨‹å¼ç‹‚æƒ³ç­†è¨˜" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ"/>
<meta name="twitter:description" content="æœ€è¿‘è¦è®“ KVM ä¸é€éè¨­å®šè·¯ç”±ï¼Œæƒ³ç›´æ¥é€£æ¥åˆ°ç¾æœ‰ç¶²æ®µï¼Œé€™é‚Šç¹¼ç¶²è·¯æ–°æ‰‹è™›æ“¬ç¶²è·¯è¨­å‚™ veth pair å¯¦ä½œç­†è¨˜ - ç¨‹å¼ç‹‚æƒ³ç­†è¨˜é€™ç¯‡ç ”ç©¶ï¼Œæˆ‘å€‘é€™é‚Šç°¡å–®æ“ä½œ Linux Bridge è®“å¤šç¨®å­”å¯ä»¥äº’ç›¸é€£ç·šã€‚"/>
<meta name="application-name" content="ç¨‹å¼ç‹‚æƒ³ç­†è¨˜">
<meta name="apple-mobile-web-app-title" content="ç¨‹å¼ç‹‚æƒ³ç­†è¨˜"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" /><link rel="prev" href="https://malagege.github.io/blog/posts/%E7%B6%B2%E8%B7%AF-Bridge-%E5%92%8C-NAT-%E5%B7%AE%E7%95%B0/" /><link rel="next" href="https://malagege.github.io/blog/posts/Ubuntu-%E4%BD%BF%E7%94%A8-Bridge-%E8%AE%93%E5%A4%96%E9%9D%A2%E7%B6%B2%E8%B7%AF%E5%8F%AF%E4%BB%A5%E9%80%A3-KVM-%E8%99%9B%E6%93%AC%E4%B8%BB%E6%A9%9F/" /><link rel="stylesheet" href="/blog/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ",
        "inLanguage": "zh-tw",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/malagege.github.io\/blog\/posts\/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C\/"
        },"genre": "posts","keywords": "ç¶²è·¯, bridge, linux, netns","wordcount":  1263 ,
        "url": "https:\/\/malagege.github.io\/blog\/posts\/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C\/","datePublished": "2023-09-17T22:28:34+08:00","dateModified": "2023-09-17T22:28:34+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "malagege"
            },"description": "\u003cp\u003eæœ€è¿‘è¦è®“ KVM ä¸é€éè¨­å®šè·¯ç”±ï¼Œæƒ³ç›´æ¥é€£æ¥åˆ°ç¾æœ‰ç¶²æ®µï¼Œé€™é‚Šç¹¼\u003ca href=\"https://malagege.github.io/blog/posts/%E7%B6%B2%E8%B7%AF%E6%96%B0%E6%89%8B-veth-pair-%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/\" target=\"_blank\" rel=\"noopener noreffer \"\u003eç¶²è·¯æ–°æ‰‹è™›æ“¬ç¶²è·¯è¨­å‚™ veth pair å¯¦ä½œç­†è¨˜ - ç¨‹å¼ç‹‚æƒ³ç­†è¨˜\u003c/a\u003eé€™ç¯‡ç ”ç©¶ï¼Œæˆ‘å€‘é€™é‚Šç°¡å–®æ“ä½œ Linux Bridge è®“å¤šç¨®å­”å¯ä»¥äº’ç›¸é€£ç·šã€‚\u003c/p\u003e"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/blog/" title="ç¨‹å¼ç‹‚æƒ³ç­†è¨˜">ç¨‹å¼ç‹‚æƒ³ç­†è¨˜</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/blog/"> é¦–é  </a><a class="menu-item" href="/blog/posts/"> æ–‡ç«  </a><a class="menu-item" href="/blog/tags/"> æ¨™ç±¤ </a><a class="menu-item" href="/blog/categories/"> åˆ†é¡ </a><a class="menu-item" href="/blog/links/" title="è¦ºå¾—ä¸éŒ¯å¥½ç«™éƒ½æœƒæ”¾åœ¨é€™é‚Š"> å¥½ç«™é€£çµ </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/blog/" title="ç¨‹å¼ç‹‚æƒ³ç­†è¨˜">ç¨‹å¼ç‹‚æƒ³ç­†è¨˜</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/blog/" title="">é¦–é </a><a class="menu-item" href="/blog/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/blog/tags/" title="">æ¨™ç±¤</a><a class="menu-item" href="/blog/categories/" title="">åˆ†é¡</a><a class="menu-item" href="/blog/links/" title="è¦ºå¾—ä¸éŒ¯å¥½ç«™éƒ½æœƒæ”¾åœ¨é€™é‚Š">å¥½ç«™é€£çµ</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
            <div align="center">
    <script
      async
      src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1439458814178865" crossorigin="anonymous"
    ></script>
    <ins
      class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-layout="in-article"
      data-ad-format="fluid"
      data-ad-client="ca-pub-1439458814178865"
      data-ad-slot="4661282975"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ</h1>

        <div align="center">
    <script
      async
      src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1439458814178865" crossorigin="anonymous"
    ></script>
    <ins
      class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-layout="in-article"
      data-ad-format="fluid"
      data-ad-client="ca-pub-1439458814178865"
      data-ad-slot="2236653478"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  <div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/blog/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>malagege</a></span>&nbsp;<span class="post-category">included in <a href="/blog/categories/%E7%B6%B2%E8%B7%AF/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>ç¶²è·¯</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-09-17">2023-09-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1263 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;6 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/blog/svg/loading.min.svg"
        data-src="https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png"
        data-srcset="https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png, https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png 1.5x, https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png 2x"
        data-sizes="auto"
        alt="https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png"
        title="https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#æŒ‡ä»¤è§£èªª">æŒ‡ä»¤è§£èªª</a>
      <ul>
        <li><a href="#å®‰è£è·¯ç”±å·¥å…·">å®‰è£è·¯ç”±å·¥å…·</a></li>
        <li><a href="#æ–°å¢ç¶²æ©‹">æ–°å¢ç¶²æ©‹</a></li>
        <li><a href="#æ–°å¢å…©å°veth">æ–°å¢å…©å°veth</a></li>
        <li><a href="#å°‡vethçš„ä¸€ç«¯ç§»å‹•åˆ°netnsä¸­">å°‡vethçš„ä¸€ç«¯ç§»å‹•åˆ°netnsä¸­</a></li>
        <li><a href="#å°‡netnsä¸­çš„æœ¬åœ°ç’°å›å’Œvethå•Ÿå‹•ä¸¦çµ„æ…‹ip">å°‡netnsä¸­çš„æœ¬åœ°ç’°å›å’Œvethå•Ÿå‹•ä¸¦çµ„æ…‹IP</a></li>
        <li><a href="#å°‡vethçš„å¦ä¸€ç«¯å•Ÿå‹•ä¸¦æ›è¼‰åˆ°ç¶²æ©‹ä¸Š">å°‡vethçš„å¦ä¸€ç«¯å•Ÿå‹•ä¸¦æ›è¼‰åˆ°ç¶²æ©‹ä¸Š</a></li>
      </ul>
    </li>
    <li><a href="#ç°¡å–®ç¹ªåœ–">ç°¡å–®ç¹ªåœ–</a></li>
    <li><a href="#åŠ åˆ†é¡Œ-host-é€£æ¥åˆ°-br0">åŠ åˆ†é¡Œ host é€£æ¥åˆ° br0</a>
      <ul>
        <li><a href="#è¨­å®š-br0">è¨­å®š br0</a></li>
        <li><a href="#é¡å¤–å»ºç«‹-veth-pair-ç›¸é€£">é¡å¤–å»ºç«‹ veth pair ç›¸é€£</a></li>
      </ul>
    </li>
    <li><a href="#æ·±å…¥-bridge-å…¶ä»–è­°é¡Œ">æ·±å…¥ Bridge å…¶ä»–è­°é¡Œ</a>
      <ul>
        <li><a href="#arp-é‹ä½œ">ARP é‹ä½œ</a></li>
        <li><a href="#br0-ç‚ºä»€éº¼å¯ä»¥è¨­å®š-ip">br0 ç‚ºä»€éº¼å¯ä»¥è¨­å®š IP</a></li>
        <li><a href="#ç­†é›»-wifi-ä¸èƒ½åš-bridge">ç­†é›» wifi ä¸èƒ½åš bridge</a></li>
      </ul>
    </li>
    <li><a href="#ç›¸é—œé€£çµ">ç›¸é—œé€£çµ</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>æœ€è¿‘è¦è®“ KVM ä¸é€éè¨­å®šè·¯ç”±ï¼Œæƒ³ç›´æ¥é€£æ¥åˆ°ç¾æœ‰ç¶²æ®µï¼Œé€™é‚Šç¹¼<a href="https://malagege.github.io/blog/posts/%E7%B6%B2%E8%B7%AF%E6%96%B0%E6%89%8B-veth-pair-%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" target="_blank" rel="noopener noreffer ">ç¶²è·¯æ–°æ‰‹è™›æ“¬ç¶²è·¯è¨­å‚™ veth pair å¯¦ä½œç­†è¨˜ - ç¨‹å¼ç‹‚æƒ³ç­†è¨˜</a>é€™ç¯‡ç ”ç©¶ï¼Œæˆ‘å€‘é€™é‚Šç°¡å–®æ“ä½œ Linux Bridge è®“å¤šç¨®å­”å¯ä»¥äº’ç›¸é€£ç·šã€‚</p>
<p>åƒè€ƒé€™ç¯‡ç¯„ä¾‹<a href="https://typesafe.cn/posts/linux-bridge/" target="_blank" rel="noopener noreffer ">Linux Bridge è¯¦è§£ | æ²¡æœ‰ç†æƒ³çš„äººä¸ä¼¤å¿ƒ</a>åœ¨ Ubuntu å°±å¯ä»¥å¯¦ä½œå‡ºä¾†ï¼Œä¸éæˆ‘ç™¼ç¾<code>bridge-utils</code>å¤§å¤šæ•¸ Linux éƒ½æ²’å®‰è£ã€‚<code>iproute2</code>å¥½åƒä¹Ÿèƒ½è¨­å®š<code>Bridge</code>ï¼Œé€™é‚Šæœƒæ›ä¸€ä¸‹æŒ‡ä»¤çœ‹çœ‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ–°å¢ç¶²æ©‹</span>
</span></span><span class="line"><span class="cl"><span class="c1"># åŸæ–¹æ³•: brctl addbr br0</span>
</span></span><span class="line"><span class="cl">ip link add name br0 <span class="nb">type</span> bridge
</span></span><span class="line"><span class="cl"><span class="c1"># å•Ÿå‹•ç¶²æ©‹</span>
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> br0 up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ–°å¢ä¸‰å€‹netns</span>
</span></span><span class="line"><span class="cl">ip netns add ns0
</span></span><span class="line"><span class="cl">ip netns add ns1
</span></span><span class="line"><span class="cl">ip netns add ns2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ–°å¢å…©å°veth</span>
</span></span><span class="line"><span class="cl">ip link add veth0-ns <span class="nb">type</span> veth peer name veth0-br
</span></span><span class="line"><span class="cl">ip link add veth1-ns <span class="nb">type</span> veth peer name veth1-br
</span></span><span class="line"><span class="cl">ip link add veth2-ns <span class="nb">type</span> veth peer name veth2-br
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å°‡vethçš„ä¸€ç«¯ç§»å‹•åˆ°netnsä¸­</span>
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth0-ns netns ns0
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth1-ns netns ns1
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth2-ns netns ns2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å°‡netnsä¸­çš„æœ¬åœ°ç’°å›å’Œvethå•Ÿå‹•ä¸¦çµ„æ…‹IP</span>
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns0 ip link <span class="nb">set</span> lo up
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns0 ip link <span class="nb">set</span> veth0-ns up
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns0 ip addr add 10.0.0.1/24 dev veth0-ns
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns1 ip link <span class="nb">set</span> lo up
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns1 ip link <span class="nb">set</span> veth1-ns up
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns1 ip addr add 10.0.0.2/24 dev veth1-ns
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns2 ip link <span class="nb">set</span> lo up
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns2 ip link <span class="nb">set</span> veth2-ns up
</span></span><span class="line"><span class="cl">ip netns <span class="nb">exec</span> ns2 ip addr add 10.0.0.3/24 dev veth2-ns
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å°‡vethçš„å¦ä¸€ç«¯å•Ÿå‹•ä¸¦æ›è¼‰åˆ°ç¶²æ©‹ä¸Š</span>
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth0-br up
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth1-br up
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth2-br up
</span></span><span class="line"><span class="cl"><span class="c1"># brctl addif br0 veth0-br</span>
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth0-br master br0
</span></span><span class="line"><span class="cl"><span class="c1"># brctl addif br0 veth1-br</span>
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth1-br master br0
</span></span><span class="line"><span class="cl"><span class="c1"># brctl addif br0 veth2-br</span>
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth2-br master br0
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€™é‚Šå°±ä¸è©³ç´°è¬› <code>bridge</code>ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰å¯«çš„<code>Bridge å’Œ NAT å·®ç•°</code>ï¼Œé€™é‚Šçœ‹å®Œå°±æ‡‰è©²çŸ¥é“ Bridge åŸç†å’Œä¸€äº›è¦æ³¨æ„çš„å•é¡Œã€‚</p>
<ul>
<li><a href="https://malagege.github.io/blog/posts/%E7%B6%B2%E8%B7%AF-Bridge-%E5%92%8C-NAT-%E5%B7%AE%E7%95%B0/" target="_blank" rel="noopener noreffer ">ç¶²è·¯ Bridge å’Œ NAT å·®ç•° - ç¨‹å¼ç‹‚æƒ³ç­†è¨˜</a></li>
</ul>
<h2 id="æŒ‡ä»¤è§£èªª">æŒ‡ä»¤è§£èªª</h2>
<h3 id="å®‰è£è·¯ç”±å·¥å…·">å®‰è£è·¯ç”±å·¥å…·</h3>
<p>é€™é‚Šèªªæ˜ä¸€ä¸‹å…©å€‹å·¥å…·å®‰è£æ–¹æ³•ï¼Œé€™é‚Šå‡å¦‚ä½ è¦ç”¨æ–°æ–¹æ³•<code>iproute2</code>é€šå¸¸ä¸éœ€è¦å†é¡å¤–å®‰è£ã€‚</p>
<ul>
<li>iproute2</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get install -y iproute2
</span></span></code></pre></td></tr></table>
</div>
</div><p>èˆŠæ–¹æ³•ã€‚</p>
<ul>
<li>bridge-utils</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get install -y bridge-utils
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–°å¢ç¶²æ©‹">æ–°å¢ç¶²æ©‹</h3>
<p><code>bridge-utils</code> è£¡é¢æä¾› <code>brctl</code>å»æ§åˆ¶ <code>bridge</code>æ“ä½œï¼Œé€™é‚Š<code>br</code>å’Œ<code>ctl</code>æ–¹ä¾¿å»è¨˜ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯<code>bridge control</code>ã€‚ç¾åœ¨å¾ˆå¤šå°é›»è…¦æ²’æœ‰é€™å€‹æŒ‡ä»¤ï¼Œå¯ä»¥ç”¨æ–°æ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># &lt;name&gt; æ”¾ bridge åç¨±</span>
</span></span><span class="line"><span class="cl">brctl addbr &lt;name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Tip<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>brctl ç›¸é—œæŒ‡ä»¤ï¼Œé€šå¸¸åŠ äº†åŠ éŒ¯è¦æƒ³è¾¦æ³•é‚„åŸï¼Œé€™é‚Šç‰¹åˆ¥ç´€éŒ„ä¸€ä¸‹ï¼Œé›–ç„¶é‡é–‹æ©Ÿå°±æœƒé‚„åŸå°±æ˜¯äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># show é¡¯ç¤º bridge è³‡è¨Š</span>
</span></span><span class="line"><span class="cl">brctl show &lt;name&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># åˆªé™¤ bridge</span>
</span></span><span class="line"><span class="cl">brctl delbr &lt;name&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># é¡¯ç¤ºå…¨éƒ¨ bridge</span>
</span></span><span class="line"><span class="cl">brctl show
</span></span></code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<p>æ–°æ–¹æ³•ä½¿ç”¨ <code>ip link help</code> çœ‹ç›¸é—œæŒ‡ä»¤ã€‚é‚„æ»¿å¤šçš„è¦æ‰¾ä¸å¥½æ‰¾ï¼Œå»ºè­°å¯ä»¥çœ‹ç¯„ä¾‹ç”¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@primary:~# ip link help
</span></span><span class="line"><span class="cl">Usage: ip link add [link DEV | parentdev NAME] [ name ] NAME
</span></span><span class="line"><span class="cl">                    [ txqueuelen PACKETS ]
</span></span><span class="line"><span class="cl">                    [ address LLADDR ]
</span></span><span class="line"><span class="cl">                    [ broadcast LLADDR ]
</span></span><span class="line"><span class="cl">                    [ mtu MTU ] [index IDX ]
</span></span><span class="line"><span class="cl">                    [ numtxqueues QUEUE_COUNT ]
</span></span><span class="line"><span class="cl">                    [ numrxqueues QUEUE_COUNT ]
</span></span><span class="line"><span class="cl">                    type TYPE [ ARGS ]
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># br_name æ”¾ bridge åç¨±</span>
</span></span><span class="line"><span class="cl">ip link add name &lt;br_name&gt; <span class="nb">type</span> bridge
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–°å¢å…©å°veth">æ–°å¢å…©å°veth</h3>
<ul>
<li>ip link add <code>veth0-ns</code> type veth peer name <code>veth0-br</code></li>
</ul>
<p>é€™æ®µçœŸçš„æ¯”è¼ƒè¤‡é›œï¼Œæˆ‘å€‘å¾<code>help</code>å»çœ‹ï¼Œå¯ä»¥çœ‹åˆ°å¤§æ¦‚æ¨£å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@primary:~# ip link <span class="nb">help</span>
</span></span><span class="line"><span class="cl">Usage: ip link add <span class="o">[</span>link DEV <span class="p">|</span> parentdev NAME<span class="o">]</span> <span class="o">[</span> name <span class="o">]</span> NAME
</span></span><span class="line"><span class="cl">                    <span class="o">[</span> txqueuelen PACKETS <span class="o">]</span>
</span></span><span class="line"><span class="cl">                    <span class="o">[</span> address LLADDR <span class="o">]</span>
</span></span><span class="line"><span class="cl">                    <span class="o">[</span> broadcast LLADDR <span class="o">]</span>
</span></span><span class="line"><span class="cl">                    <span class="o">[</span> mtu MTU <span class="o">]</span> <span class="o">[</span>index IDX <span class="o">]</span>
</span></span><span class="line"><span class="cl">                    <span class="o">[</span> numtxqueues QUEUE_COUNT <span class="o">]</span>
</span></span><span class="line"><span class="cl">                    <span class="o">[</span> numrxqueues QUEUE_COUNT <span class="o">]</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">type</span> TYPE <span class="o">[</span> ARGS <span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root@primary:~# ip link <span class="nb">help</span> veth
</span></span><span class="line"><span class="cl">Usage: ip link &lt;options&gt; <span class="nb">type</span> veth <span class="o">[</span>peer &lt;options&gt;<span class="o">]</span>
</span></span><span class="line"><span class="cl">To get &lt;options&gt; <span class="nb">type</span> <span class="s1">&#39;ip link add help&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€™é‚Šæˆ‘å€‘çœ‹<code>name</code>ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¦‚æœå¾<code>ip link &lt;options&gt; type veth [peer &lt;options&gt;]</code>ä¾†çœ‹ï¼Œä½ æœƒç™¼ç¾å¯ä»¥çœç•¥æ›´å¤šæ±è¥¿ã€‚æœ€å¾ŒæŒ‡ä»¤å¯ä»¥ä¸‹<code>ip link add type veth</code>ï¼Œåªæ˜¯ veth å»ºç«‹å‡ºä¾†æœƒæ˜¯ç³»çµ±å¹«ä½ å‘½åã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ubuntu@primary:~$ sudo ip link add <span class="nb">type</span> veth
</span></span><span class="line"><span class="cl">ubuntu@primary:~$ ip a
</span></span><span class="line"><span class="cl">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="m">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="m">1000</span>
</span></span><span class="line"><span class="cl">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span class="line"><span class="cl">    inet 127.0.0.1/8 scope host lo
</span></span><span class="line"><span class="cl">       valid_lft forever preferred_lft forever
</span></span><span class="line"><span class="cl">    inet6 ::1/128 scope host
</span></span><span class="line"><span class="cl">       valid_lft forever preferred_lft forever
</span></span><span class="line"><span class="cl">.....
</span></span><span class="line"><span class="cl">3: veth0@veth1: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu <span class="m">1500</span> qdisc noop state DOWN group default qlen <span class="m">1000</span>
</span></span><span class="line"><span class="cl">    link/ether ca:f3:02ğŸ‡©ğŸ‡ª74:7e brd ff:ff:ff:ff:ff:ff
</span></span><span class="line"><span class="cl">4: veth1@veth0: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu <span class="m">1500</span> qdisc noop state DOWN group default qlen <span class="m">1000</span>
</span></span><span class="line"><span class="cl">    link/ether 92:83:9e:54:a5:90 brd ff:ff:ff:ff:ff:ff
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å°‡vethçš„ä¸€ç«¯ç§»å‹•åˆ°netnsä¸­">å°‡vethçš„ä¸€ç«¯ç§»å‹•åˆ°netnsä¸­</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ip link <span class="nb">set</span> veth0-ns netns ns0
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@primary:~# ip link <span class="nb">set</span> <span class="nb">help</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> <span class="o">{</span> DEVICE <span class="p">|</span> dev DEVICE <span class="p">|</span> group DEVGROUP <span class="o">}</span>
</span></span><span class="line"><span class="cl">                        <span class="o">[</span> <span class="o">{</span> up <span class="p">|</span> down <span class="o">}</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">                        <span class="o">[</span> <span class="nb">type</span> TYPE ARGS <span class="o">]</span>
</span></span><span class="line"><span class="cl">                ....
</span></span><span class="line"><span class="cl">                <span class="o">[</span> netns <span class="o">{</span> PID <span class="p">|</span> NAME <span class="o">}</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">                ...
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å°‡netnsä¸­çš„æœ¬åœ°ç’°å›å’Œvethå•Ÿå‹•ä¸¦çµ„æ…‹ip">å°‡netnsä¸­çš„æœ¬åœ°ç’°å›å’Œvethå•Ÿå‹•ä¸¦çµ„æ…‹IP</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ip netns exec ns2 ip addr add 10.0.0.3/24 dev veth2-ns</span>
</span></span><span class="line"><span class="cl"><span class="c1"># é€™é‚Šå°±ä¸å¯«å‡º netns æŒ‡ä»¤å‡ºä¾†</span>
</span></span><span class="line"><span class="cl">ip addr add 10.0.0.3/24 dev veth2-ns
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ubuntu@primary:~$ ip addr <span class="nb">help</span>
</span></span><span class="line"><span class="cl">Usage: ip address <span class="o">{</span>add<span class="p">|</span>change<span class="p">|</span>replace<span class="o">}</span> IFADDR dev IFNAME <span class="o">[</span> LIFETIME <span class="o">]</span>
</span></span><span class="line"><span class="cl">                                                      <span class="o">[</span> CONFFLAG-LIST <span class="o">]</span>
</span></span><span class="line"><span class="cl">       ip address del IFADDR dev IFNAME <span class="o">[</span>mngtmpaddr<span class="o">]</span>
</span></span><span class="line"><span class="cl">       ip address <span class="o">{</span>save<span class="p">|</span>flush<span class="o">}</span> <span class="o">[</span> dev IFNAME <span class="o">]</span> <span class="o">[</span> scope SCOPE-ID <span class="o">]</span>
</span></span><span class="line"><span class="cl">                            <span class="o">[</span> to PREFIX <span class="o">]</span> <span class="o">[</span> FLAG-LIST <span class="o">]</span> <span class="o">[</span> label LABEL <span class="o">]</span> <span class="o">[</span>up<span class="o">]</span>
</span></span><span class="line"><span class="cl">       ip address <span class="o">[</span> show <span class="o">[</span> dev IFNAME <span class="o">]</span> <span class="o">[</span> scope SCOPE-ID <span class="o">]</span> <span class="o">[</span> master DEVICE <span class="o">]</span>
</span></span><span class="line"><span class="cl">                         <span class="o">[</span> <span class="nb">type</span> TYPE <span class="o">]</span> <span class="o">[</span> to PREFIX <span class="o">]</span> <span class="o">[</span> FLAG-LIST <span class="o">]</span>
</span></span><span class="line"><span class="cl">                         <span class="o">[</span> label LABEL <span class="o">]</span> <span class="o">[</span>up<span class="o">]</span> <span class="o">[</span> vrf NAME <span class="o">]</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">       ip address <span class="o">{</span>showdump<span class="p">|</span>restore<span class="o">}</span>
</span></span><span class="line"><span class="cl">IFADDR :<span class="o">=</span> PREFIX <span class="p">|</span> ADDR peer PREFIX
</span></span><span class="line"><span class="cl">          <span class="o">[</span> broadcast ADDR <span class="o">]</span> <span class="o">[</span> anycast ADDR <span class="o">]</span>
</span></span><span class="line"><span class="cl">          <span class="o">[</span> label IFNAME <span class="o">]</span> <span class="o">[</span> scope SCOPE-ID <span class="o">]</span> <span class="o">[</span> metric METRIC <span class="o">]</span>
</span></span><span class="line"><span class="cl">SCOPE-ID :<span class="o">=</span> <span class="o">[</span> host <span class="p">|</span> link <span class="p">|</span> global <span class="p">|</span> NUMBER <span class="o">]</span>
</span></span><span class="line"><span class="cl">FLAG-LIST :<span class="o">=</span> <span class="o">[</span> FLAG-LIST <span class="o">]</span> FLAG
</span></span><span class="line"><span class="cl">FLAG  :<span class="o">=</span> <span class="o">[</span> permanent <span class="p">|</span> dynamic <span class="p">|</span> secondary <span class="p">|</span> primary <span class="p">|</span>
</span></span><span class="line"><span class="cl">           <span class="o">[</span>-<span class="o">]</span>tentative <span class="p">|</span> <span class="o">[</span>-<span class="o">]</span>deprecated <span class="p">|</span> <span class="o">[</span>-<span class="o">]</span>dadfailed <span class="p">|</span> temporary <span class="p">|</span>
</span></span><span class="line"><span class="cl">           CONFFLAG-LIST <span class="o">]</span>
</span></span><span class="line"><span class="cl">CONFFLAG-LIST :<span class="o">=</span> <span class="o">[</span> CONFFLAG-LIST <span class="o">]</span> CONFFLAG
</span></span><span class="line"><span class="cl">CONFFLAG  :<span class="o">=</span> <span class="o">[</span> home <span class="p">|</span> nodad <span class="p">|</span> mngtmpaddr <span class="p">|</span> noprefixroute <span class="p">|</span> autojoin <span class="o">]</span>
</span></span><span class="line"><span class="cl">LIFETIME :<span class="o">=</span> <span class="o">[</span> valid_lft LFT <span class="o">]</span> <span class="o">[</span> preferred_lft LFT <span class="o">]</span>
</span></span><span class="line"><span class="cl">LFT :<span class="o">=</span> forever <span class="p">|</span> SECONDS
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€™é‚Šå¯ä»¥çœ‹åˆ° <code>add</code></p>
<h3 id="å°‡vethçš„å¦ä¸€ç«¯å•Ÿå‹•ä¸¦æ›è¼‰åˆ°ç¶²æ©‹ä¸Š">å°‡vethçš„å¦ä¸€ç«¯å•Ÿå‹•ä¸¦æ›è¼‰åˆ°ç¶²æ©‹ä¸Š</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ip link <span class="nb">set</span> veth0-br master br0
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¾é€™æŒ‡ä»¤çœ‹åˆ°ä¸­é–“ç”¨ <code>master</code> å­—çœ¼åšä¸²æ¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">        ip link <span class="nb">set</span> <span class="o">{</span> DEVICE <span class="p">|</span> dev DEVICE <span class="p">|</span> group DEVGROUP <span class="o">}</span>
</span></span><span class="line"><span class="cl">                        <span class="o">[</span> <span class="o">{</span> up <span class="p">|</span> down <span class="o">}</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">                        <span class="o">[</span> <span class="nb">type</span> TYPE ARGS <span class="o">]</span>
</span></span><span class="line"><span class="cl">.....
</span></span><span class="line"><span class="cl">                <span class="o">[</span> master DEVICE <span class="o">][</span> vrf NAME <span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw" aria-hidden="true"></i>Info<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>å¾Œä¾†æœ‰çˆ¬åˆ°é€™ç¯‡å¯ä»¥çœ‹ç›¸é—œç¯„ä¾‹æŒ‡ä»¤ã€‚</p>
<ul>
<li><a href="https://hackmd.io/@0xff07/SJzOwViYF" target="_blank" rel="noopener noreffer ">è¨ˆç®—æ©Ÿç¶²è·¯ - Network Namespace - HackMD</a></li>
<li><a href="https://wiki.archlinuxcn.org/wiki/Network_bridge" target="_blank" rel="noopener noreffer ">Network bridge - Arch Linux ä¸­æ–‡ç»´åŸº</a></li>
</ul>
</div>
        </div>
    </div>
<h2 id="ç°¡å–®ç¹ªåœ–">ç°¡å–®ç¹ªåœ–</h2>
<p><img
        class="lazyload"
        src="/blog/svg/loading.min.svg"
        data-src="https://user-images.githubusercontent.com/6058558/268509638-35b3c5fd-ccb4-4681-a606-df5971df5267.png"
        data-srcset="https://user-images.githubusercontent.com/6058558/268509638-35b3c5fd-ccb4-4681-a606-df5971df5267.png, https://user-images.githubusercontent.com/6058558/268509638-35b3c5fd-ccb4-4681-a606-df5971df5267.png 1.5x, https://user-images.githubusercontent.com/6058558/268509638-35b3c5fd-ccb4-4681-a606-df5971df5267.png 2x"
        data-sizes="auto"
        alt="https://user-images.githubusercontent.com/6058558/268509638-35b3c5fd-ccb4-4681-a606-df5971df5267.png"
        title="ç°¡å–®æ¶æ§‹" /></p>
<p>åŸæœ¬æƒ³èªªè·Ÿä¸Šç¯‡ä¸€æ¨£ä¸€å€‹ä¸€å€‹ç•«ï¼Œä¸éå¾Œä¾†è¦ºå¾—ä¸éœ€è¦ã€‚ç…§è‘—åšä¹Ÿèƒ½å¯ä»¥äº†è§£ã€‚</p>
<h2 id="åŠ åˆ†é¡Œ-host-é€£æ¥åˆ°-br0">åŠ åˆ†é¡Œ host é€£æ¥åˆ° br0</h2>
<p>ä½ åšåˆ°é€™é‚Šæœƒç™¼ç¾ä½  host ä¸»æ©Ÿæ²’è¾¦æ³•é€£ç›¸é—œ IP ï¼Œå‡å¦‚ä½ éƒ½æœƒæ“ä½œè¨­å®š<code>br0</code>äº†ï¼Œä½ æ‡‰è©²ä¹Ÿèƒ½è¨­å®šã€‚é€™é‚Šå¯ä»¥è‡ªå·±è©¦è©¦çœ‹ã€‚</p>
<h3 id="è¨­å®š-br0">è¨­å®š br0</h3>
<p>è¨­å®š <code>br0</code> IPã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ip addr add  10.0.0.4/24 dev br0
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹ä¾†ä½ ä¹Ÿèƒ½</p>
<h3 id="é¡å¤–å»ºç«‹-veth-pair-ç›¸é€£">é¡å¤–å»ºç«‹ veth pair ç›¸é€£</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ip link add  name veth-3 <span class="nb">type</span> veth peer name veth-br3
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth-br3 master br0
</span></span><span class="line"><span class="cl">ip addr add 10.0.0.4/24 dev veth3
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth-3 up
</span></span><span class="line"><span class="cl">ip link <span class="nb">set</span> veth-br3 up
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€™æ¨£è¨­å®šå®Œå°±å¯ä»¥ pingäº†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@primary:~# ping 10.0.0.3
</span></span><span class="line"><span class="cl">PING 10.0.0.3 <span class="o">(</span>10.0.0.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.0.0.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.298 ms
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.0.0.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.099 ms
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ·±å…¥-bridge-å…¶ä»–è­°é¡Œ">æ·±å…¥ Bridge å…¶ä»–è­°é¡Œ</h2>
<p>åœ¨æ•´ç†é€™ç¯‡ä¹Ÿæœ‰çœ‹å¾ˆå¤šæ±è¥¿ï¼Œä½†æ˜¯èŠ±å¾ˆå¤šæ™‚é–“åœ¨é€™é‚Šå¯¦ä½œæ¼”ç¤ºã€‚åŸæœ¬ä¸»è¦æ˜¯è®“æˆ‘çš„ KVM Bridge</p>
<h3 id="arp-é‹ä½œ">ARP é‹ä½œ</h3>
<p><a href="https://www.readfog.com/a/1646531917244370944" target="_blank" rel="noopener noreffer ">Linux è™›æ“¬ç¶²çµ¡è¨­å‚™ä¹‹ bridge - é–±åŠ</a>è£¡é¢æœ‰æåˆ° <code>ping</code>ï¼Œè£¡é¢ arp ç›¸é—œæ±è¥¿ï¼Œé€™é‚Šæ‰¾äº†ç›¸é—œæ±è¥¿</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=o2LoG-83rp8" target="_blank" rel="noopener noreffer ">(51) When do you need the ARP protocol? -Wireshark - YouTube</a><br>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/o2LoG-83rp8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>
</li>
</ul>
<p>æˆ‘è¦ºå¾—ä»‹ç´¹é‚„æ»¿ç°¡å–®æ˜“æ‡‚ï¼Œæ¨è–¦çœ‹é€™å€‹å½±ç‰‡</p>
<h3 id="br0-ç‚ºä»€éº¼å¯ä»¥è¨­å®š-ip">br0 ç‚ºä»€éº¼å¯ä»¥è¨­å®š IP</h3>
<blockquote>
<p>bridgeå¿…é ˆè¦çµ„æ…‹IPå—ï¼Ÿ</p>
<p>åœ¨æˆ‘å€‘å¸¸è¦‹çš„ç‰©ç†äº¤æ›æ©Ÿä¸­ï¼Œæœ‰å¯ä»¥é…ç½®IPå’Œä¸èƒ½é…ç½®IPå…©ç¨®ï¼Œä¸èƒ½é…ç½®IPçš„äº¤æ›æ©Ÿä¸€èˆ¬é€šécomå£é€£ä¸Šå»åšé…ç½®ï¼ˆæ›´ç°¡å–®çš„äº¤æ›æ©Ÿé€£comå£çš„æ²’æœ‰ï¼Œä¸æ”¯æŒä»»ä½•é…ç½®ï¼‰ï¼Œè€Œèƒ½é…ç½®IPçš„äº¤æ›æ©Ÿå¯ä»¥åœ¨é…ç½®å¥½IPä¹‹å¾Œï¼Œé€šéè©²IPé ç¨‹é€£æ¥ä¸Šå»åšé…ç½®ï¼Œå¾è€Œæ›´æ–¹ä¾¿ã€‚</p>
<p>bridgeå°±å±¬æ–¼å¾Œä¸€ç¨®äº¤æ›æ©Ÿï¼Œè‡ªå¸¶è™›æ“¬ç¶²å¡ï¼Œå¯ä»¥é…ç½®IPï¼Œè©²è™›æ“¬ç¶²å¡ä¸€ç«¯é€£åœ¨bridgeä¸Šï¼Œå¦ä¸€ç«¯è·Ÿå”è­°æ£§ç›¸é€£ã€‚å’Œç‰©ç†äº¤æ›æ©Ÿä¸€æ¨£ï¼Œbridgeçš„å·¥ä½œä¸ä¾è³´æ–¼è©²è™›æ“¬ç¶²å¡ï¼Œä½†bridgeå·¥ä½œä¸ä»£è¡¨æ©Ÿå™¨èƒ½é€£ä¸Šç¶²ï¼Œè¦çœ‹çµ„ç¶²æ–¹å¼ã€‚</p>
</blockquote>
<p>åƒè€ƒ: <a href="https://segmentfault.com/a/1190000009491002" target="_blank" rel="noopener noreffer ">Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¹‹bridge(æ¡¥) - Linuxç¨‹åºå‘˜ - SegmentFault æ€å¦</a></p>
<p>æ¨è–¦çœ‹è£¡é¢æ–‡ç« ï¼Œå…¶å¯¦å¾Œé¢å¾ˆæƒ³é‡å°ä¸€äº› Case åšå¯¦ä½œï¼Œä½†èŠ±çš„æ™‚é–“è¶…å‡ºé æœŸï¼Œæ‰€ä»¥å°±ç‰¹åˆ¥æ”¾åœ¨é€™é‚Šã€‚</p>
<p>æˆ‘ä¹‹å‰è½æœ‹å‹èªªåˆ°ç¶²è·¯å­”ä¸èƒ½è¨­å®š IPï¼Œé‚£å°±æ˜¯ L2 è¨­å‚™ï¼Œä½†å¾<code>ä¸èƒ½é…ç½®IPçš„äº¤æ›æ©Ÿä¸€èˆ¬é€šécomå£é€£ä¸Šå»åšé…ç½®ï¼ˆæ›´ç°¡å–®çš„äº¤æ›æ©Ÿé€£comå£çš„æ²’æœ‰ï¼Œä¸æ”¯æŒä»»ä½•é…ç½®ï¼‰</code>é€™æ®µè©±æ„Ÿè¦ºé‚„æ˜¯èƒ½åšåˆ°çš„ã€‚ä½†é€™é‚Šä¸ç¢ºå®šæ˜¯ä¸æ˜¯çœŸçš„é€™æ¨£ï¼Œæˆ‘ä¹Ÿæ²’è¾¦æ³•å¯¦é©—ã€‚</p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw" aria-hidden="true"></i>Info<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">æˆ‘åŸæœ¬ Google æœå°‹ Linux Bridge æ‰¾åˆ° <a href="https://www.readfog.com/a/1646531917244370944" target="_blank" rel="noopener noreffer ">Linux è™›æ“¬ç¶²çµ¡è¨­å‚™ä¹‹ bridge - é–±åŠ</a><a href="https://user-images.githubusercontent.com/6058558/258121625-6f0d4507-efb3-401e-9659-997310874156.png" target="_blank" rel="noopener noreffer ">å‚™ä»½åœ–</a><br>
ï¼Œä½†å¾Œä¾†ç™¼ç¾é€™å€‹å¥½åƒæ˜¯è½‰è²¼çš„ã€‚ä¸‹é¢æœ‰åŸæœ¬é€£çµï¼Œå…§å®¹ä»‹ç´¹æ›´å¤šã€‚</div>
        </div>
    </div>
<h3 id="ç­†é›»-wifi-ä¸èƒ½åš-bridge">ç­†é›» wifi ä¸èƒ½åš bridge</h3>
<blockquote>
<p>Linux kernel ä¸å…è¨±ç„¡ç·šç¶²è·¯ä»¥ managed mode é€²è¡Œæ©‹æ¥ã€‚ä½†æˆ‘å€‘ç­‰ä¸‹å°±æœƒè¨­å®š hostapd è®“ç„¡ç·šç¶²è·¯é€²å…¥ master modeï¼Œå› æ­¤é€™å€‹éŒ¯èª¤æš«æ™‚ç„¡è¦–å³å¯ã€‚</p>
</blockquote>
<ul>
<li><a href="https://electronic.blue/blog/2012/07/02-bridge-wireless-network-on-linux/" target="_blank" rel="noopener noreffer ">åœ¨ Linux ä¸Šè¨­ç½®ç„¡ç·šæ©‹æ¥å™¨ | electronic_blue</a></li>
</ul>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Tip<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Bing AI:<br>
æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¾†æŸ¥çœ‹ç¶²è·¯å¡çš„æ¨¡å¼ï¼š <code>iwconfig</code></div>
        </div>
    </div>
<blockquote>
<p>To add a wireless interface to a bridge, you first have to assign the wireless interface to an access point or start an access point with hostapd. Otherwise the wireless interface will not be added to the bridge.</p>
</blockquote>
<ul>
<li><a href="https://wiki.archlinux.org/title/Network_bridge#Wireless_interface_on_a_bridge" target="_blank" rel="noopener noreffer ">Network bridge - ArchWiki</a></li>
<li><a href="https://blog.csdn.net/wit_732/article/details/121038477" target="_blank" rel="noopener noreffer ">Linuxç³»ç»Ÿå°†WiFié…ç½®ä¸ºAPæ¨¡å¼ &mdash; hostapd å’Œ udhcpdçš„ä½¿ç”¨è¯´æ˜_æµ®äº‘æµå“çš„åšå®¢-CSDNåšå®¢</a></li>
</ul>
<p>é€™é‚Š wifi ç”¨ç†±é»æ¨¡å¼å°±æœ‰éæˆ‘æƒ³è¦çš„ã€‚æ‰€ä»¥å¾Œä¾†æˆ‘æ”¹ç¶²è·¯å­”å»åš bridgeã€‚</p>
<h2 id="ç›¸é—œé€£çµ">ç›¸é—œé€£çµ</h2>
<ul>
<li><a href="https://superuser.com/questions/764986/howto-setup-a-veth-virtual-network" target="_blank" rel="noopener noreffer ">linux - Howto setup a `veth` virtual network - Super User</a><br>
<a href="https://fafucoder.github.io/2020/06/14/linux-veth-pair/" target="_blank" rel="noopener noreffer ">linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡ | å¥½è®°å¿†ä¸å¦‚çƒ‚ç¬”å¤´ | é—®é¢˜è®°å½•ï¼Œå­¦ä¹ ç¬”è®°</a></li>
<li><a href="https://www.zhaohuabing.com/post/2020-03-12-linux-network-virtualization/" target="_blank" rel="noopener noreffer ">Linux network namespaceï¼Œ vethï¼Œ birdgeä¸è·¯ç”±-èµµåŒ–å†°çš„åšå®¢ | Zhaohuabing Blog</a></li>
<li><a href="https://www.youtube.com/watch?v=96Z1_6rX5qU" target="_blank" rel="noopener noreffer ">(52) How to Bridge internet from wireless laptop to a wired device - YouTube</a><br>
WIFIå°æœ‰ç·šç¶²è·¯æ©‹æ¥å‹•ä½œï¼Œæœ‰ç©ºä¾†è¨˜éŒ„ã€‚</li>
</ul><div align="center">
    <script
      async
      src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1439458814178865" crossorigin="anonymous"
    ></script>
    <ins
      class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-layout="in-article"
      data-ad-format="fluid"
      data-ad-client="ca-pub-1439458814178865"
      data-ad-slot="2236653478"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  
        </div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-09-17</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" data-title="è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ" data-hashtags="ç¶²è·¯,bridge,linux,netns"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" data-hashtag="ç¶²è·¯"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" data-title="è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" data-title="è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on å¾®åš" data-sharer="weibo" data-url="https://malagege.github.io/blog/posts/%E8%AE%93%E8%99%9B%E6%93%AC%E7%B6%B2%E8%B7%AF%E5%AD%94%E5%92%8C%E5%90%84%E7%A8%AE%E8%A8%AD%E5%82%99%E9%80%A3%E6%8E%A5%E8%B5%B7%E4%BE%86-Linux-Bridge-%E5%AF%A6%E4%BD%9C/" data-title="è®“è™›æ“¬ç¶²è·¯å­”å’Œå„ç¨®è¨­å‚™é€£æ¥èµ·ä¾† - Linux Bridge å¯¦ä½œ" data-image="https://user-images.githubusercontent.com/6058558/268508745-c9ac584e-33dc-4111-9fa9-8f156127c1ed.png"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/blog/tags/%E7%B6%B2%E8%B7%AF/">ç¶²è·¯</a>,&nbsp;<a href="/blog/tags/bridge/">bridge</a>,&nbsp;<a href="/blog/tags/Linux/">Linux</a>,&nbsp;<a href="/blog/tags/netns/">netns</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/blog/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/posts/%E7%B6%B2%E8%B7%AF-Bridge-%E5%92%8C-NAT-%E5%B7%AE%E7%95%B0/" class="prev" rel="prev" title="ç¶²è·¯ Bridge å’Œ NAT å·®ç•°"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>ç¶²è·¯ Bridge å’Œ NAT å·®ç•°</a>
            <a href="/blog/posts/Ubuntu-%E4%BD%BF%E7%94%A8-Bridge-%E8%AE%93%E5%A4%96%E9%9D%A2%E7%B6%B2%E8%B7%AF%E5%8F%AF%E4%BB%A5%E9%80%A3-KVM-%E8%99%9B%E6%93%AC%E4%B8%BB%E6%A9%9F/" class="next" rel="next" title="Ubuntu ä½¿ç”¨ Bridge è®“å¤–é¢ç¶²è·¯å¯ä»¥é€£ KVM è™›æ“¬ä¸»æ©Ÿ">Ubuntu ä½¿ç”¨ Bridge è®“å¤–é¢ç¶²è·¯å¯ä»¥é€£ KVM è™›æ“¬ä¸»æ©Ÿ<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.118.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/blog/" target="_blank">malagege</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://malagege-blog.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightgallery":true,"search":{"algoliaAppID":"4LYONZIY18","algoliaIndex":"malagege_blog","algoliaSearchKey":"30dc05f673e702e0701b9b40cfa44eac","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/blog/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-105195903-2', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-105195903-2" async></script></body>
</html>
